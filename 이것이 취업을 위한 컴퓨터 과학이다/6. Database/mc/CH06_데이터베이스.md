# CH06 데이터베이스

- [1. 데이터베이스의 큰 그림](#1-데이터베이스의-큰-그림)
= [2. RDBMS의 기본]()
- [3. SQL]()
- [4. 효율적 쿼리]()
- [5. 데이터베이스 설계]()
- [6. NoSQL]()

## 1. 데이터베이스의 큰 그림

### 데이터베이스와 DBMS

- `데이터베이스(DB)`: 여러 사람이 공유하고 사용할 수 있도록 체계적으로 저장·관리하는 데이터의 집합. (정보의 집합이라고 생각하자.)

- `DBMS(Database Management System)`: 데이터베이스를 생성, 관리, 운용하기 위한 소프트웨어.

웹 서비스의 성능과 정체성은 어떤 데이터를 어떻게 저장하느냐에 따라 달라짐.

- DBMS의 종류
| 구분        | 설명                               | 대표 제품                             |
| --------- | -------------------------------- | --------------------------------- |
| **RDBMS** | 테이블 기반의 정형화된 구조, **스키마 존재**      | MySQL, PostgreSQL, Oracle, SQLite |
| **NoSQL DBMS** | 비정형 데이터 저장 가능, **스키마 없음 또는 유연함** | MongoDB, Redis                    |

- `SQL(Structured Query Language)` : 데이터베이스를 다룰 때에 사용되는 언어 중 하나
    - `DDL(Data Definition Language)` : 데이터 정의  
    e.g. CREATE, ALTER, DROP, TRUNCATE
    - `DMLData Manipulation Language` : 데이터 조작
    e.g. SELECT, INSERT, UPDATE, DELETE
    - `DCLData Control Language` : 데이터 제어 (작업 상태와 관련된)
    e.g. COMMIT, ROLLBACK, SAVEPOINT
    - `TCLTransaction Control Language` : 트랜잭션 제어  
    e.g. GRANT, REVOKE


> Q. 스키마(scheme)란?
> - 테이블 구조를 정의하는 설계도  
> - 필드, 데이터 타입, 제약 조건 등 정의한 것

```
sql
CREATE TABLE users (
  id INT PRIMARY KEY,
  name VARCHAR(50),
  email VARCHAR(100) UNIQUE,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);
```

> Q. 스키마의 존재 유무가 끼치는 영향은? 
> 데이터 구조의 일관성 유지, 잘못된 데이터 입력 방지, 정형화된 쿼리 작성 가능

> Q. 왜 파일보다 DBMS를 사용할까요?
>
> (1) 데이터의 일관성 및 무결성을 유지하기 위해서입니다.  
> 특정 데이터에 동시 접속할 경우 레이스 컨디션이 발생할 수 있습니다.
>
> (2) 중복되는 저장이 많을 수 있습니다.  
> 동일 정보를 반복해서 저장할 경우 공간이 낭비됩니다.
>
> (3) 연관된 데이터의 변경이 어렵습니다.
> 관련된 파일들을 일일이 찾아 수정해야 합니다.
>
> (4) 백업 및 복구가 어렵습니다.  
> 장애가 발생했을 경우 복구가 힘듭니다.

### 데이터베이스의 저장 단위

- `엔티티 (Entity)` : 저장 가능한 독립 객체, 집합이라기 보다는 하나 하나의 구성 요소 e.g. 학생, 제품, 구매자
- `엔티티 집합` : 같은 속성을 공유하는 엔티티 모음
- `속성 (Attribute)` : 엔티티의 특성 e.g. 이름, 나이, 제품번호 등
- `도메인 (Domain)` : 속성이 가질 수 있는 값의 집합 e.g. 성별이라는 속성의 도메인은 {남자, 여자}
- `레코드 (Record)` : 저장된 엔티티(DB에 기록된 값)
- `필드 (Field)` : 레코드의 속성
- `차수(degree)` : 필드의 수, 필드의 총 개수
- `카디널리티(cardinality)` : 한 필드에 대한 고유 값의 수 e.g. 성별이라는 필드의 카디널리티는 2 이다.
- `릴레이션 (Relation)` : 테이블 구조로 표현된 엔티티 집합 e.g. SQL 테이블  
`+` NoSQL에서는 `컬렉션(collection)`이라는 단위로 표현


> 엔티티는 저장 가능한 대상, 레코드는 저장된 대상
### 트랜잭션과 ACID

- `트랜잭션 (Transaction)` : DB에서 하나의 논리적 작업 단위
    - `TPS` : 초당 트랜잭션 처리 수, 성능 지표로 활용

- `ACID` : 원자성, 일관성, 격리성, 지속성

| 속성                        | 설명                              | 예시                    |
| ------------------------- | ------------------------------- | --------------------- |
| **A - 원자성 (Atomicity)**   | 모두 성공하거나 모두 실패 (All or Nothing) | 송금 중 실패 시, 출금도 롤백     |
| **C - 일관성 (Consistency)** | 트랜잭션 전후 데이터 일관된 상태 유지           | 학과 인원수 +1 일관성 유지      |
| **I - 격리성 (Isolation)**   | 동시 수행 트랜잭션 간 간섭 방지              | 같은 재고 상품 2명이 동시에 구매 X |
| **D - 지속성 (Durability)**  | 완료된 트랜잭션 결과는 영구 저장              | 전기 꺼져도 입금 내용 보존됨      |

> 쉽게 외워보기
> 1. 원자성(Atomicity)
> Atomic = 더 쪼갤 수 없는
> 원자처럼 하나의 단위로 처리되는 성질이다.
> 트랜잭션은 하나의 원자처럼 하나의 트랜잭션이 다 처리되거나, 다 처리가 안 되거나!
> 
> 2. 일관성(Consistency)
> 일관성 = 앞뒤가 맞고 규칙을 지킨다.
> 어떤 작업을 해도 데이터는 항상 정해진 규칙을 만족해야한다.
> e.g. 일관성은 최종적인 결과에 관한 것인듯 => A가 50만원 출금 -> B에게 50만원 송금하면 A + B는 여전히 유지되어야한다! 
> 
> 3. 격리성(Isolation)
> 격리 = 따로 떨어져 있다.
> 동시에 실행되는 트랜잭션은 떨어져서(독립적으로) 실행되는 것처럼 보이게 해야 한다. (실제로 독립적으로 실행되는 것은 아니다.)
> 
> 4. 지속성(Durability)
> 지속 = 오래 간다, 남아 있다.
> 트랜잭션이 성공적으로 끝났다면 그 결과는 어떠한 상황에서도 보존되어야 한다.










## 2 RDBMS의 기본
| **2절** | RDBMS의 테이블 구성, 관계, 무결성 제약 조건          |
### 테이블의 구성: 필드와 레코드
### 테이블의 관계
### 무결성 제약 조건
## 3 SQL
| **3절** | SQL 기본 - DDL, DML, DCL, TCL 명령어       |
### 데이터 정의 언어(DDL)
### 데이터 조작 언어(DML)
### 트랜잭션 제어 언어(TCL)
## 4 효율적 쿼리
| **4절** | 효율적 쿼리 - 서브쿼리, 조인, 뷰, 인덱스             |
### 서브 쿼리와 조인
### 뷰
### 인덱스
## 5 데이터베이스 설계
| **5절** | DB 설계 - ER 다이어그램, 정규화                 |
### ER 다이어그램
### 정규화
## 6 NoSQL
| **6절** | NoSQL 개념 - MongoDB, Redis 등 다양한 저장 형태 |
### RDBMS vs NoSQL: NoSQL의 특징
### 다양한 NoSQL: MongoDB와 Redis 맛보기
### 추가 학습 NOTE 데이터베이스 분할과 샤딩
###  기술 면접 TIP 취업 멘토가 알려 주는 기술 면접 질문 20

<div style="height:400px"></div>

## 면접 예상 질문 : 교재

<div style="font-family: sans-serif; line-height: 1.6;">
    <details>
    <summary><strong style="color: #007B8F;">Q.</strong> <strong style="font-size: 1.05em;">답변 내용</strong></summary> 
        <p>
        <strong style="color: #999;">A.</strong>문제 내용
        </p>
    </details>
</div>

## 면접 예상 질문 : 추가 질문

<div style="font-family: sans-serif; line-height: 1.6;">
    <details>
    <summary><strong style="color: #007B8F;">Q.</strong> <strong style="font-size: 1.05em;">답변 내용</strong></summary> 
        <p>
        <strong style="color: #999;">A.</strong>문제 내용
        </p>
    </details>
</div>